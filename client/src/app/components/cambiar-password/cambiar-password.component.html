<app-menu></app-menu>

  <div class="breadcrumb-container">
    <h1 class="page-title">Cambio de Contraseña</h1>

    <div class="breadcrumb">
      <a href="/" class="breadcrumb-link">Inicio</a>
      /<a href="/login" class="breadcrumb-link">Inicio de Sesión</a>
      /<span class="breadcrumb-current">Cambio de Contraseña</span>
    </div>
  </div>

    <div class="card">
        <mat-horizontal-stepper [linear]="true" #stepper>
            <!-- Paso 1: Captcha -->
            <mat-step label="Valida que eres humano" [optional]="false" [editable]="false" [completed]="captchaDatos">
              <div class="captcha-container">
                <ngx-recaptcha2 #captchaElem
                  [siteKey]="siteKey"
                  (success)="handleCaptchaResponse($event,stepper)">
                </ngx-recaptcha2> 
              </div>
            </mat-step>

            <!-- Paso 2: Email -->
            <mat-step label="Email" [editable]="false" [optional]="false" [completed]="emailDatos">
                <form class="centered-form">
                    <div class="form-title text-center">
                      <h2 style="color: #020061;">Ingrese su email</h2>
                    </div>
                    <div class="row">
                        <div class="col-md-12 d-flex justify-content-center">
                          <div class="text-center">
                            <input type="email" style="width: 230px;" class="form-control texto" id="email" placeholder="algo@example.com" [(ngModel)]="email" [ngModelOptions]="{standalone: true}">
                          </div>
                        </div>
                      </div>                      
                    <div class="row centered-buttons">
                      <div class="col-md-12 text-center">
                        <button mat-button  type="submit" class="btn siguiente btn-large" (click)="envioEmail(stepper)">Siguiente</button>
                      </div>
                    </div>
                  </form>
            </mat-step>

            <!-- Paso 3: Código de verificación -->
            <mat-step label="Código de verificación" [editable]="false" [optional]="false" [completed]="codigoDatos">
                <form class="centered-form">
                    <div class="form-title text-center">
                      <h2 style="color: #020061;">Código de verificación</h2>
                    </div>
                    <div class="row">
                        <div class="col-md-12 d-flex justify-content-center">
                            <div class="text-center">
                                <h6>Para continuar, por favor ingrese el código de verificación que fué enviado a su correo electrónico.</h6>
                            </div>
                        </div>
                        <div class="col-md-12 d-flex justify-content-center">
                            <div class="text-center">
                                <input type="number" style="width: 230px;" class="form-control texto" id="codigo" placeholder="XXXXXX" [(ngModel)]="codigoRecibido" [ngModelOptions]="{standalone: true}">
                            </div>
                        </div>
                      </div>                      
                    <div class="row centered-buttons">
                      <div class="col-md-12 text-center">
                        <button mat-button  type="submit" class="btn siguiente btn-large" (click)="validarCodigo(stepper)">Siguiente</button>
                      </div>
                    </div>
                  </form>
            </mat-step>

            <!-- Paso 4: Cambio de contraseña -->
            <mat-step label="Cambio de contraseña" [editable]="false" [optional]="false" [completed]="codigoDatos">
                <form class="centered-form">
                    <div class="form-title text-center">
                      <h2 style="color: #020061;">Cambia tu Contraseña</h2>
                    </div>
                    <div class="row">
                        <div class="col-md-12 d-flex justify-content-center">
                            <div class="text-center">
                                <input type="password" style="width: 230px;" class="form-control texto" id="password" placeholder="********" [(ngModel)]="password" [ngModelOptions]="{standalone: true}">
                            </div>
                        </div>
                      </div>                      
                    <div class="row centered-buttons">
                      <div class="col-md-12 text-center">
                        <button mat-button  type="submit" class="btn siguiente btn-large" (click)="cambiarPassword()">Siguiente</button>
                      </div>
                    </div>
                  </form>
            </mat-step>
          </mat-horizontal-stepper>
    </div>

<app-footer></app-footer>
